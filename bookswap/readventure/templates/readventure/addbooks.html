{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Books</title>
    <link rel="stylesheet" href="{% static 'css/addbooks.css' %}">
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var savebutton = document.getElementById('savebutton');
            var readonly = true;
            var inputs = document.querySelectorAll('.forms input[type="text"]');
            var profilePictureInput = document.getElementById('profilePictureInput');
            var profilePicture = document.getElementById('profilePicture');

            savebutton.addEventListener('click', function () {
                for (var i = 0; i < inputs.length; i++) {
                    inputs[i].toggleAttribute('readonly');
                }

                // Toggle the disabled attribute for the profile picture input
                profilePictureInput.toggleAttribute('disabled');

                if (savebutton.innerHTML == "edit") {
                    savebutton.innerHTML = "save";
                } else {
                    savebutton.innerHTML = "edit";
                }
            });

            // Handle profile picture change
            profilePictureInput.addEventListener('change', function (event) {
                var file = event.target.files[0];
                if (file) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        profilePicture.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

    </script>
</head>
<body>
    <header>
        <nav><a href="{% url 'home' %}" style="font-size: 32px;">ReadVenture</a></nav>
        <nav>
            <a href="{% url 'home' %}" style="color: rgb(217, 196, 255);">HOME</a>
            <a href="{% url 'mybooks' %}">MY BOOKS</a>
            <a href="{% url 'wishlist' %}">WISHLIST</a>
            <a href="{% url 'borrowed' %}">BORROWED</a>
            <a href="{% url 'profile' %}" style="margin-right: 20px;">PROFILE</a>
        </nav>
    </header>

    <div class="container" style="background-image: url(/static/image/home.jpg);background-size: cover; background-repeat: no-repeat; background-attachment: fixed;">
        <div class="card">
            <div class="info">
                <span>Enter Book Info:</span>
                <button id="savebutton">edit</button>
            </div>
            <div class="content">
                <form method="post" action="{% url 'add_book' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="forms">
                        <div class="inputs">
                            <span>Title</span>
                            {{ form.title }}
                        </div>
                        <div class="inputs">
                            <span>Author <i style="font-size: 12px; color: rgb(30, 0, 161);">*Use "," to separate multiple Authors</i></span>
                            {{ form.authors }}
                        </div>
                        <div class="inputs">
                            <span>ISBN</span>
                            {{ form.isbn }}
                        </div>
                        <div class="inputs">
                            <span>Genre</span>
                            {{ form.genre }}
                        </div>
                        <div class="inputs">
                            <span>Category</span>
                            {{ form.category }}
                        </div>
                        <div class="inputs">
                            <span>Language</span>
                            {{ form.language }}
                        </div>
                    </div>
                    <div class="image-container">
                        <div class="inputs">
                            <span>Cover Photo</span>
                            {{ form.cover_photo }}
                        </div>
                    </div>
                    <button type="submit">Save</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
